{"ast":null,"code":"import { NgFor } from '@angular/common';\nimport { LeaderboardComponent } from '../leaderboard/leaderboard.component';\nimport { ShopPreviewComponent } from '../shop-preview/shop-preview.component';\nimport { TimerComponent } from \"../timer/timer.component\";\nimport { CoreService } from \"../core.service\";\nimport { Router } from \"@angular/router\";\nimport { GamePointsModule } from \"../game-points/game-points.module\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../core.service\";\nimport * as i2 from \"@angular/router\";\nfunction GameComponent_span_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 4);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const virus_r1 = ctx.$implicit;\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵstyleProp(\"left\", virus_r1.x, \"px\")(\"top\", virus_r1.y, \"px\");\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\" + \", ctx_r1.virusAmountGained, \" Virus \");\n  }\n}\nexport let GameComponent = /*#__PURE__*/(() => {\n  class GameComponent {\n    coreService;\n    router;\n    newButtonClicks = 0;\n    floatingTexts = [];\n    virusAmountGained = 1;\n    constructor(coreService, router) {\n      this.coreService = coreService;\n      this.router = router;\n    }\n    ngOnInit() {\n      this.coreService.initialized.subscribe(() => {\n        this.coreService.sendData(\"get-session-info\", \"\", sessionInfo => {\n          let json = JSON.parse(sessionInfo);\n          if (!json.sessionKey) {\n            this.router.navigate([\"session-joining\"]);\n          }\n        });\n        setInterval(() => {\n          if (this.newButtonClicks > 0) {\n            this.coreService.sendData(\"handle-button-clicks\", this.newButtonClicks + \"\");\n            this.newButtonClicks = 0;\n          }\n        }, 250);\n      });\n    }\n    addVirus(event) {\n      this.newButtonClicks++;\n      // Get button position for floating text\n      const button = event.target;\n      const rect = button.getBoundingClientRect();\n      // Generate random offset near the button for floating text\n      const randomX = rect.left + rect.width / 2 + (Math.random() * 200 - 150);\n      const randomY = rect.top + rect.height / 2 + (Math.random() * 100 - 50);\n      const newText = {\n        x: randomX,\n        y: randomY\n      };\n      this.floatingTexts.push(newText);\n      setTimeout(() => {\n        this.floatingTexts.shift();\n      }, 2000);\n    }\n    static ɵfac = function GameComponent_Factory(__ngFactoryType__) {\n      return new (__ngFactoryType__ || GameComponent)(i0.ɵɵdirectiveInject(i1.CoreService), i0.ɵɵdirectiveInject(i2.Router));\n    };\n    static ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: GameComponent,\n      selectors: [[\"app-game\"]],\n      decls: 12,\n      vars: 1,\n      consts: [[1, \"game\"], [3, \"click\"], [1, \"floating-text-container\"], [\"class\", \"floating-text\", 3, \"left\", \"top\", 4, \"ngFor\", \"ngForOf\"], [1, \"floating-text\"]],\n      template: function GameComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelement(0, \"br\")(1, \"app-timer\")(2, \"points\")(3, \"app-shop-preview\");\n          i0.ɵɵelementStart(4, \"section\", 0)(5, \"button\", 1);\n          i0.ɵɵlistener(\"click\", function GameComponent_Template_button_click_5_listener($event) {\n            return ctx.addVirus($event);\n          });\n          i0.ɵɵtext(6, \"Free Bitcoin!\");\n          i0.ɵɵelement(7, \"br\");\n          i0.ɵɵtext(8, \"\\u2B07\\uFE0FDownload Now\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(9, \"div\", 2);\n          i0.ɵɵtemplate(10, GameComponent_span_10_Template, 2, 5, \"span\", 3);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelement(11, \"app-leaderboard\");\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(10);\n          i0.ɵɵproperty(\"ngForOf\", ctx.floatingTexts);\n        }\n      },\n      dependencies: [NgFor, LeaderboardComponent, ShopPreviewComponent, TimerComponent, GamePointsModule],\n      styles: [\".score[_ngcontent-%COMP%]{position:relative;top:20px;font-size:24px;text-align:center}.game[_ngcontent-%COMP%]{display:flex;justify-content:center;height:50vh;align-items:center}.floating-text[_ngcontent-%COMP%]{position:absolute;font-size:35px;color:#00ff08;font-weight:700;animation:_ngcontent-%COMP%_floatUp 2s ease-out forwards;pointer-events:none;-webkit-text-stroke:1px black}@keyframes _ngcontent-%COMP%_floatUp{0%{transform:translateY(0);opacity:1}to{transform:translateY(-50px);opacity:0}}\"]\n    });\n  }\n  return GameComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}