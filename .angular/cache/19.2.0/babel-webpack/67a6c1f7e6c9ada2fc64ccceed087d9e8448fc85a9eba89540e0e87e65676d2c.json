{"ast":null,"code":"import { CoreService } from \"../core.service\";\nimport { NgForOf } from \"@angular/common\";\nimport { GamePointsModule } from \"../game-points/game-points.module\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../core.service\";\nimport * as i2 from \"../game-points/game-points.module\";\nfunction ShopPreviewComponent_div_4_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r1 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 5)(1, \"button\", 6);\n    i0.ɵɵlistener(\"click\", function ShopPreviewComponent_div_4_Template_button_click_1_listener() {\n      const entry_r2 = i0.ɵɵrestoreView(_r1).$implicit;\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.handleEffectClick(entry_r2));\n    });\n    i0.ɵɵelementStart(2, \"span\", 7);\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"ul\")(5, \"li\")(6, \"b\");\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(8, \"li\")(9, \"i\");\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(11, \"li\");\n    i0.ɵɵtext(12);\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    const entry_r2 = ctx.$implicit;\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"disabled\", ctx_r2.coreService.points < ctx_r2.parseInt(entry_r2.cost));\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(entry_r2.icon);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", entry_r2.name, \" \");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" \", entry_r2.description, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" Kosten: \", entry_r2.cost, \" Viren\");\n  }\n}\nexport let ShopPreviewComponent = /*#__PURE__*/(() => {\n  class ShopPreviewComponent {\n    coreService;\n    gamePoints;\n    effects = [];\n    updateInProgress = false;\n    constructor(coreService, gamePoints) {\n      this.coreService = coreService;\n      this.gamePoints = gamePoints;\n    }\n    ngOnInit() {\n      this.coreService.initialized.subscribe(() => {\n        this.coreService.sendData(\"get-effects\", \"\", effects => {\n          console.log(\"effects: \" + effects);\n          let json = JSON.parse(effects);\n          json.forEach(e => this.effects.push(e));\n        });\n      });\n    }\n    handleEffectClick(effect) {\n      this.gamePoints.stopListening();\n      if (!this.updateInProgress && this.coreService.points >= parseInt(effect.cost)) {\n        this.updateInProgress = true;\n        this.coreService.points -= parseInt(effect.cost);\n        this.coreService.sendData(effect.route, \"\", updatedEffects => {\n          this.effects = JSON.parse(updatedEffects);\n          this.updateInProgress = false;\n          this.gamePoints.startListening();\n        });\n      }\n    }\n    parseInt = parseInt;\n    static ɵfac = function ShopPreviewComponent_Factory(__ngFactoryType__) {\n      return new (__ngFactoryType__ || ShopPreviewComponent)(i0.ɵɵdirectiveInject(i1.CoreService), i0.ɵɵdirectiveInject(i2.GamePointsModule));\n    };\n    static ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: ShopPreviewComponent,\n      selectors: [[\"app-shop-preview\"]],\n      decls: 6,\n      vars: 1,\n      consts: [[1, \"shop-container\"], [1, \"shop-title\"], [1, \"row\"], [\"class\", \"categories\", 4, \"ngFor\", \"ngForOf\"], [\"rel\", \"stylesheet\", \"href\", i0.ɵɵtrustConstantResourceUrl`https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200`], [1, \"categories\"], [1, \"category-item\", 3, \"click\", \"disabled\"], [1, \"material-symbols-outlined\"]],\n      template: function ShopPreviewComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"main\", 0)(1, \"h1\", 1);\n          i0.ɵɵtext(2, \"Shop\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(3, \"div\", 2);\n          i0.ɵɵtemplate(4, ShopPreviewComponent_div_4_Template, 13, 5, \"div\", 3);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelement(5, \"link\", 4);\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(4);\n          i0.ɵɵproperty(\"ngForOf\", ctx.effects);\n        }\n      },\n      dependencies: [NgForOf],\n      styles: [\"div.row[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:10px}.shop-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:flex-start;align-items:center;width:75vw;height:18vh;margin:auto auto 20px;padding:20px;background-color:var(--secondary-background);border-radius:10px;box-shadow:0 4px 10px #0003;border:1px var(--border-color) solid}.shop-title[_ngcontent-%COMP%]{font-size:2rem;margin-bottom:20px}.categories[_ngcontent-%COMP%]{display:flex;justify-content:space-evenly;align-items:center}.category-item[_ngcontent-%COMP%]{padding:15px 30px;font-size:1rem;border:1px var(--border-color) solid;border-radius:10px;cursor:pointer;background:var(--secondary-button-gradient)!important}\"]\n    });\n  }\n  return ShopPreviewComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}